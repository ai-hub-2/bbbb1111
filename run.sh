#!/bin/bash

# ๐ต ููู ุชุดุบูู ุชุทุจูู ุงูุนูุงูุฉ ุงูุฒุฑูุงุก
# Blue Badge Application Runner

echo "๐ต ุชุทุจูู ุงูุนูุงูุฉ ุงูุฒุฑูุงุก ุงูุดุงูู"
echo "Blue Badge Complete Application"
echo "=================================================="

# ุงูุชุญูู ูู ูุฌูุฏ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
if [ ! -d "venv" ]; then
    echo "โ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ ุบูุฑ ููุฌูุฏุฉ"
    echo "๐ ุฅูุดุงุก ุจูุฆุฉ ุงูุชุฑุงุถูุฉ ุฌุฏูุฏุฉ..."
    python3 -m venv venv
fi

# ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
echo "๐ง ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ..."
source venv/bin/activate

# ุงูุชุญูู ูู ุงูููุชุจุงุช
echo "๐ฆ ุงูุชุญูู ูู ุงูููุชุจุงุช..."
if ! python3 -c "import tkinter, requests, dns.resolver, bs4, lxml" 2>/dev/null; then
    echo "โ๏ธ ุจุนุถ ุงูููุชุจุงุช ููููุฏุฉ"
    echo "๐ฅ ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ..."
    pip install -r requirements.txt
fi

# ุชุดุบูู ุงูุชุทุจูู
echo "๐ ุจุฏุก ุชุดุบูู ุงูุชุทุจูู..."
echo "=================================================="

# ุชุดุบูู ุงูุชุทุจูู ุงูุฑุฆูุณู
python3 main.py

# ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ
if [ $? -ne 0 ]; then
    echo "โ ุญุฏุซ ุฎุทุฃ ูู ุชุดุบูู ุงูุชุทุจูู"
    echo "๐ง ูุญุงููุฉ ุชุดุบูู ุงูุชุทุจูู ูุจุงุดุฑุฉ..."
    python3 blue_badge_app.py
fi